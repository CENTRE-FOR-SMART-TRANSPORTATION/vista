# Trajectory documentation

The trajectory is generated by fitting a least-squares parametric curve to all of the points that were directly below the scanning vehicle when the data was recorded.
From this curve, we then obtain the trajectory details, for each scene/road point:

- ``road_points``: The discrete interval of points spaced 1m apart along the curve.
- ``forwards``: The unit vector in the forward direction, at the road point.
  - Determined by obtaining a window of 5 meters worth of road points in either direction, and taking the least squares slope over x, y, z for over this window.
- ``upwards``: The unit vector in the upward direction, at the road point.
  - Determined by fitting a plane over the xyz points given by a ``floor_box_edge`` x ``floor_box_edge`` m slice of the road centered at the road point, and then finding the normal vector to this plane.
    - ``floor_box_edge`` is usually 2 meters
- ``leftwards``: The unit vector in the leftwards direction, at the road point.
  - Determined by simply taking the crossw product of ``forwards`` and ``leftwards``.
- ``observer_points``: the road points, but shifted ``observer_height`` m upwards along the upwards vector to simulate the POV on a vehicle's roof (an observer)
  - ``observer_height`` is usually assumed to be 1.8m (the average height of a vehicle.)

## Usage

If you wish to manually input the trajectory parameters:

```python gen_traj.py```
